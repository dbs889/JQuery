<!DOCTYPE html>
<html>
	<head>
		<meta charset="UTF-8">
		<title>dataType</title>
		<link href ="../CSS/public.css" rel ="stylesheet">
		<script src="../js/jquery-3.5.1.min.js" ></script>
		<script>
		
			$(function(){
				
				let xhr = new XMLHttpRequest(); //let : 바뀌지 않은 변수 선언
				
				$('#text').on('click',function(){
					
					//요청
					
					xhr.open('get','text.jsp',true); //데이터가 없으므오 jsp뒤에?를 붙이지 않는다
					xhr.send();
					
					//응답
					xhr.onreadystatechange = function(){
						
						if(this.readyState == 4 && this.status == 200){
							res = this.responseText;
							//요청을 하면 text.jsp에서 응갑을 처리하고 res가 응답 받으면 res = 홍길동/개나리/진달래/수선화/라일락/무궁화/백합
							//res를 ul로 잘라서 나타낸다 split사용 (split : 구분자를 기준으로 자른다)
							
							res = res.split("/");
							code ="<ul>"
							
							$.each(res,function(i){
							
								code += "<li>" + res[i] + "</li>";
// 								code += `<li> ${res[i]} </li>`;
								
							})//반복문
								code += "</ul>"
							
							$('#result1').html(code)
					}//if
					}//orsc
					
				})//text
				
				$('#jsonArr').on('click',function(){
					
					xhr.open('get','jsonArr.jsp',true);
					xhr.send();
					
					xhr.onreadystatechange = function(){
						
						if(this.readyState == 4 && this.status == 200){
							res = this.responseText;
							resjson = JSON.parse(res);
							
							code = "<ol>";
							
							$.each(resjson,function(i){
								code += "<li>" + resjson[i] + "</li>";
							})
							
							code += "</ol>";
							$('#result2').html(code);
						}
					}
					
				})//jsonArr
				$('#jsonObj').on('click',function(){
					
					xhr.open('get','jsonObj.jsp',true);
					xhr.send();
					
				xhr.onreadystatechange = function(){
						
						if(this.readyState == 4 && this.status == 200){
							res = this.responseText;
							resjson = JSON.parse(res);
							
							
							code = "이름 : " + resjson.name + "<br>";
							code += "주소 : " + resjson.addr + "<br>";
							code += "전화번호 : " + resjson.tel + "<br>";
							code += "메일 : " + resjson.mail + "<br>";
							
							$('#result3').html(code);
							
						}//if
					}//orsc
					
					
				})//jsonObj
				$('#jsonObjArr').on('click',function(){
					
					
					
					xhr.open('get','jsonObjArr.jsp',true);
					xhr.send();

					xhr.onreadystatechange = function(){
						
						if(this.readyState == 4 && this.status == 200){
							res = this.responseText;
							resjson = JSON.parse(res);
							
							code ="<br>";
							
							$.each(resjson,function(i){
								
							code += i+1 +"번째 회원 자료" + "<br>"	
							code += "이름 : " + resjson[i].name + "<br>";
							code += "주소 : " + resjson[i].addr + "<br>";
							code += "전화번호 : " + resjson[i].tel + "<br>";
							code += "메일 : " + resjson[i].mail + "<br><br>";
							
							})
							
							
							
							$('#result4').html(code);
							
						}//if
					}//orsc
					
					
				})//jsonObjArr
				
				
				
				
				
				
				
			})//f
		</script>
		<style>
		
		.box #result1, .box div{
				
				height: auto;
				width : 200px;
				padding : 20px;
				margin: 10px;
				border: 3px dotted #46613d;
				float: left;
				
		
		}
		
		.box{
			
			height: 500px;
		
		
		}
		
		</style>
	</head>
	<body>
		
		<div class ="box box1">
			<h3>타이틀</h3>
			<input type = "button" id = "text" value ="text데이타">
			<input type = "button" id ="jsonArr" value ="json배열">
			<input type = "button" id ="jsonObj"value ="jsonObject">
			<input type = "button" id = "jsonObjArr"value ="jsonObject배열">
			<br>
			<div id = "result1"></div>
			<div id = "result2"></div>
			<div id = "result3"></div>
			<div id = "result4"></div>
		</div>
		<div class ="box box3">
			<h3>타이틀</h3>
			<input type = "button" id = "text2" value ="text데이타">
			<input type = "button" id ="jsonArr2" value ="json배열">
			<input type = "button" id ="jsonObj2"value ="jsonObject">
			<input type = "button" id = "jsonObjArr2"value ="jsonObject배열">
			<br>
			<div id = "result1"></div>
			<div id = "result2"></div>
			<div id = "result3"></div>
			<div id = "result4"></div>
		</div>
	</body>
</html>