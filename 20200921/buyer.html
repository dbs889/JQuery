<!DOCTYPE html>
<html>
	<head>
		<meta charset="UTF-8">
		<title>3.buyer</title>
		<link href ="../CSS/public.css" rel ="stylesheet">
		<script src="../js/jquery-3.5.1.min.js" ></script>
		<script>
		
			$(function(){
				
				$('#but1').on('click',function(){
					
					//단축메뉴
					$.get('buyerName.jsp',function(res){
						
						code = "";
						$.each(res,function(i){
							
								code += "<p id ='" + res[i].id + "'>" + res[i].name + "</p>";	
						})
						$('#names').html(code);
				},'json')
				
				
// 					$.getJSON('buyerName.jsp',function(res){})
					
// 					$.ajax({
					
// 						url : 'buyerName.jsp',
// 						success : function(res){
							
// 							code = "";
// 							$.each(res,function(i){
// 								code += "<p id ='" + res[i].id + "'>" + res[i].name + "</p>";	
// 							})
// 							$('#names').html(code);
// 						},//suc
						
// 						error : function(req){
// 							alert(req.status)
// 						},//err
						
// 						dataType : 'json'
						
						
// 					})
					
				})//btn
				
				
				
			$(document).on('click','p',function(){ //새롭게 생성된거에 이벤트를 주려면 delegate 사용
// 				== $('#names').on('click','p',function(){})
			
				
// 				$.post('buyerDetail.jsp',{"id":$(this).attr('id')},function(res){
				
// 				},'json')
				
				$.ajax({
						url : "buyerDetail.jsp",
						type :"post",
						data : {"id" : $(this).attr('id')},
// 					==	data : "id=" +  $(this).attr('id'),
						dataType : "json",
						success : function(res){
							
							code = "<table>";		
							code += "<tr><td>Buyer_ID</td>";
							code += "<td>" + res.id + "</td></tr>";
								
							code += "<tr><td>Buyer_Lgu</td>";
							code += "<td>" + res.lgu + "</td></tr>";
								
							code += "<tr><td>Buyer_Name</td>";
							code += "<td>" + res.name + "</td></tr>";
								
							code += "<tr><td>Buyer_Bank</td>";
							code += "<td>" + res.bank + "</td></tr>";
							
							code += "<tr><td>Buyer_BankName</td>";
							code += "<td>" + res.bankname + "</td></tr>";
							
							code += "<tr><td>Buyer_BankNo</td>";
							code += "<td>" + res.bankno + "</td></tr>";
							
							code += "<tr><td>Buyer_Comtel</td>";
							code += "<td>" + res.comtel + "</td></tr>";
							
							code += "<tr><td>Buyer_Addr</td>";
							code += "<td>" + res.addr + "</td></tr>";
							
							code += "<tr><td>Buyer_Zip</td>";
							code += "<td>" + res.zip + "</td></tr>";
							
						
							code += "</table>";
							
							$('#detail').html(code);
							
						},//suc
				
						error : function(req){
							
						}				
					
					
					
					
				})//ajax
			})//p-doc

			})
		</script>
		<style>
		
		
		p:hover{
		background: lime;
		}
		#detail{
		width:  500px;}
		#names{
		
		width: 250px;
		
		}
		#title{
		
			height: 50px;
			background: lightblue;
		
		}
		td{
		text-align: center;
		padding: 5px;
		height: auto;
		
		}
		
		</style>
	</head>
	<body>
		
		<div class ="box">
			<h3>타이틀</h3>
			<input type = "button" id = "but1" value ="buyerName">
			<div id = "result1">
			<table border="1">
			
			<tr id ="title">
			<td >거래처이름</td>
			<td>거래처상세정보</td>
			</tr>
			<tr>
			<td id = "names"></td>
			<td id = "detail"></td>
			</tr>
			
			</table>
			
			</div>
		</div>
		
	</body>
</html>